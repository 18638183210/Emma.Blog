
@{
    ViewData["Title"] = "Home Page";
}

<h1>主页</h1>
@if (!Context.User.Identity.IsAuthenticated)
{
    <span>请登录,<a asp-action="Login" asp-controller="User">登录</a></span>
}
else
{
    <span>欢迎您,@Context.User.Identity.Name，<a asp-action="logout" asp-controller="User">注销</a></span>



} <span>欢迎您,@ViewBag.ConId,@ViewBag.Ip</span>
<div>
    <a href="/user/create">添加用户</a>
</div>
<p>
    <button id="btn">访问api获取用户信息 </button>
</p>
<p>
    <button id="btn1">提交信息并返回 </button>
    昵称：<input type="text" id="nickname" />
    年龄：<input type="text" id="age" />
</p>
<div id="info">
    info....
</div>

@section scripts{
    <script src="~/js/common.js"></script>
    <script>

        $('#btn').click(function () {
            $.ajax({
                url: "/api/values",
                type: 'post',
                data: {
                    username: '1123131313',
                    password:'mima'
                },
                success: function (res) {
                    $('#info').html(JSON.stringify(res));

                },
                error: function (res) {
                    $('#info').html(JSON.stringify(res));
                }
            });

        });


        $('#btn1').click(function () {
            $.ajax({
                url: "/api/values/getdata",
                type: 'post',
                data: {
                    user: {
                        nickname: 'zhangsan',
                        age: 2
                    },
                    book: {
                        name: ".net core 跨平台",
                        price: 25.85
                    },
                    imgUrls: ["http://www.baidu.com/1.jpg", "http://www.baidu.com/2.jpg"],
                    name:'lisi'
                },
                success: function (res) {
                    $('#info').html(JSON.stringify(res));

                },
                error: function (res) {
                    $('#info').html(JSON.stringify(res));
                }
            });

        });
    </script>
}